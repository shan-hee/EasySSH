# EasySSH å¼€å‘æŒ‡å—

## è¿è¡Œç¯å¢ƒè¦æ±‚

- **Node.js**: >= 20.0.0 (æ¨èä½¿ç”¨æœ€æ–°LTSç‰ˆæœ¬)
- **npm**: >= 10.0.0
- **SQLite**: >= 3.0.0 (è‡ªåŠ¨å®‰è£…)
- **Docker**: >= 20.10 (ç”Ÿäº§éƒ¨ç½²)
- **æµè§ˆå™¨**: æ”¯æŒç°ä»£æµè§ˆå™¨ (Chrome 90+, Firefox 88+, Edge 90+, Safari 14+)

### ğŸ’» æœ¬åœ°å¼€å‘å®‰è£…

#### 1. å…‹éš†ä»“åº“

```bash
git clone https://github.com/shanheee/easyssh.git
cd easyssh
```

#### 2. ç¯å¢ƒé…ç½®

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘.envæ–‡ä»¶ï¼Œé…ç½®å…³é”®å‚æ•°
# JWT_SECRET: JWTä»¤ç‰Œå¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼‰
# ENCRYPTION_KEY: æ•°æ®åŠ å¯†å¯†é’¥ï¼ˆç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹ï¼‰
# SERVER_PORT: åç«¯æœåŠ¡ç«¯å£ï¼ˆé»˜è®¤8000ï¼‰
```

#### 3. å®‰è£…ä¾èµ–

```bash
# å®‰è£…å‰ç«¯ä¾èµ–
npm install

# å®‰è£…åç«¯ä¾èµ–
cd server
npm install
cd ..
```

#### 4. å¯åŠ¨å¼€å‘ç¯å¢ƒ

```bash
# æ–¹å¼1: åˆ†åˆ«å¯åŠ¨ï¼ˆæ¨èå¼€å‘è°ƒè¯•ï¼‰
# ç»ˆç«¯1 - å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev

# ç»ˆç«¯2 - å¯åŠ¨åç«¯æœåŠ¡å™¨
cd server
npm run dev
```

**å¼€å‘ç¯å¢ƒè®¿é—®ï¼š**
- å‰ç«¯å¼€å‘æœåŠ¡å™¨: `http://localhost:5173` (Viteé»˜è®¤ç«¯å£)
- åç«¯APIæœåŠ¡å™¨: `http://localhost:8000`
- å‰ç«¯é€šè¿‡Viteä»£ç†è®¿é—®åç«¯API


## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EasySSH æ¶æ„å›¾                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æµè§ˆå™¨å®¢æˆ·ç«¯                                                â”‚
â”‚  â”œâ”€â”€ Vue 3 + Vite (å‰ç«¯)                                   â”‚
â”‚  â”œâ”€â”€ Xterm.js (ç»ˆç«¯)                                       â”‚
â”‚  â””â”€â”€ Element Plus (UIç»„ä»¶)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Nginx åå‘ä»£ç† (ç«¯å£: 8520)                               â”‚
â”‚  â”œâ”€â”€ é™æ€èµ„æºæœåŠ¡ (/)                                      â”‚
â”‚  â”œâ”€â”€ APIä»£ç† (/api/*)                                      â”‚
â”‚  â”œâ”€â”€ SSH WebSocket (/ssh)                                  â”‚
â”‚  â””â”€â”€ ç›‘æ§ WebSocket (/monitor)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Node.js åç«¯æœåŠ¡ (ç«¯å£: 8000)                             â”‚
â”‚  â”œâ”€â”€ Express APIæœåŠ¡å™¨                                     â”‚
â”‚  â”œâ”€â”€ SSH WebSocketæœåŠ¡                                     â”‚
â”‚  â”œâ”€â”€ ç›‘æ§ WebSocketæœåŠ¡                                    â”‚
â”‚  â””â”€â”€ SFTPæ–‡ä»¶ä¼ è¾“æœåŠ¡                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ•°æ®å­˜å‚¨å±‚                                                 â”‚
â”‚  â”œâ”€â”€ SQLite æ•°æ®åº“ (ç”¨æˆ·ã€è¿æ¥ã€è„šæœ¬)                      â”‚
â”‚  â”œâ”€â”€ node-cache å†…å­˜ç¼“å­˜                                   â”‚
â”‚  â””â”€â”€ æ–‡ä»¶ç³»ç»Ÿ (æ—¥å¿—ã€ä¸´æ—¶æ–‡ä»¶)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é¡¹ç›®ç›®å½•ç»“æ„

```
easyssh/
â”œâ”€â”€ ğŸ“ src/                    # å‰ç«¯æºä»£ç 
â”‚   â”œâ”€â”€ ğŸ“ components/         # Vueç»„ä»¶åº“
â”‚   â”‚   â”œâ”€â”€ auth/              # è®¤è¯ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ terminal/          # ç»ˆç«¯ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ monitoring/        # ç›‘æ§ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ sftp/              # SFTPæ–‡ä»¶ç®¡ç†
â”‚   â”‚   â””â”€â”€ settings/          # è®¾ç½®ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ views/              # é¡µé¢è§†å›¾
â”‚   â”œâ”€â”€ ğŸ“ store/              # PiniaçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“ services/           # å‰ç«¯æœåŠ¡å±‚
â”‚   â”œâ”€â”€ ğŸ“ router/             # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ ğŸ“ utils/              # å·¥å…·å‡½æ•°
â”œâ”€â”€ ğŸ“ server/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ ğŸ“ controllers/        # APIæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ ğŸ“ models/             # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ ğŸ“ services/           # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“ routes/             # APIè·¯ç”±
â”‚   â”œâ”€â”€ ğŸ“ middleware/         # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ ğŸ“ ssh/                # SSHè¿æ¥ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“ monitoring/         # ç›‘æ§WebSocketæœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“ config/             # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ data/               # SQLiteæ•°æ®åº“
â”‚   â”œâ”€â”€ ğŸ“ scripts/            # è„šæœ¬åº“
â”‚   â””â”€â”€ ğŸ“ utils/              # åç«¯å·¥å…·
â”œâ”€â”€ ğŸ“ public/                 # é™æ€èµ„æº
â”œâ”€â”€ ğŸ“ dist/                   # æ„å»ºè¾“å‡º
â”œâ”€â”€ ğŸ“ docs/                   # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ ğŸ³ Dockerfile              # Dockeræ„å»ºæ–‡ä»¶
â”œâ”€â”€ ğŸ³ docker-compose.yml      # Dockerç¼–æ’
â”œâ”€â”€ âš™ï¸ nginx.conf              # Nginxé…ç½®
â”œâ”€â”€ ğŸš€ start.sh                # å¯åŠ¨è„šæœ¬
â””â”€â”€ ğŸ“¦ package.json            # é¡¹ç›®é…ç½®
```

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯æ ˆ | ç‰ˆæœ¬ | ç”¨é€” |
|------|--------|------|------|
| **å‰ç«¯** | Vue 3 | ^3.4.21 | å“åº”å¼UIæ¡†æ¶ |
| | Vite | ^5.2.8 | æ„å»ºå·¥å…·å’Œå¼€å‘æœåŠ¡å™¨ |
| | Pinia | ^2.1.6 | çŠ¶æ€ç®¡ç† |
| | Element Plus | ^2.4.2 | UIç»„ä»¶åº“ |
| | Xterm.js | ^5.5.0 | ç»ˆç«¯æ¨¡æ‹Ÿå™¨ |
| **åç«¯** | Node.js | >=20.0.0 | è¿è¡Œæ—¶ç¯å¢ƒ |
| | Express | ^5.1.0 | Webæ¡†æ¶ |
| | WebSocket (ws) | ^8.18.1 | å®æ—¶é€šä¿¡ |
| | SSH2 | ^1.16.0 | SSHè¿æ¥åº“ |
| **æ•°æ®åº“** | SQLite | - | è½»é‡çº§æ•°æ®åº“ |
| | better-sqlite3 | ^11.9.1 | SQLiteé©±åŠ¨ |
| | node-cache | ^5.1.2 | å†…å­˜ç¼“å­˜ |
| **éƒ¨ç½²** | Docker | >=20.10 | å®¹å™¨åŒ– |
| | Nginx | - | åå‘ä»£ç† |

## ğŸ’» å¼€å‘æŒ‡å—

### å‰ç«¯å¼€å‘æµç¨‹

#### 1. ç»„ä»¶å¼€å‘
```bash
# åˆ›å»ºæ–°ç»„ä»¶
src/components/
â”œâ”€â”€ common/           # é€šç”¨ç»„ä»¶
â”œâ”€â”€ terminal/         # ç»ˆç«¯ç›¸å…³ç»„ä»¶
â”œâ”€â”€ monitoring/       # ç›‘æ§ç»„ä»¶
â”œâ”€â”€ sftp/            # æ–‡ä»¶ä¼ è¾“ç»„ä»¶
â””â”€â”€ settings/        # è®¾ç½®ç»„ä»¶
```

#### 2. é¡µé¢å¼€å‘
```bash
# åœ¨ src/views/ ä¸­åˆ›å»ºé¡µé¢
# åœ¨ src/router/index.js ä¸­é…ç½®è·¯ç”±
# ä½¿ç”¨ Pinia store ç®¡ç†çŠ¶æ€
```

#### 3. çŠ¶æ€ç®¡ç†
```javascript
// ä½¿ç”¨ Pinia store
import { useUserStore } from '@/store/user'
import { useTerminalStore } from '@/store/terminal'
import { useConnectionStore } from '@/store/connection'
```

### åç«¯å¼€å‘æµç¨‹

#### 1. APIå¼€å‘
```bash
# 1. åœ¨ server/models/ ä¸­å®šä¹‰æ•°æ®æ¨¡å‹
# 2. åœ¨ server/services/ ä¸­å®ç°ä¸šåŠ¡é€»è¾‘
# 3. åœ¨ server/controllers/ ä¸­å®šä¹‰æ§åˆ¶å™¨
# 4. åœ¨ server/routes/ ä¸­æ³¨å†Œè·¯ç”±
```

#### 2. WebSocketæœåŠ¡
```bash
# SSH WebSocket: server/ssh/
# ç›‘æ§ WebSocket: server/monitoring/
```

#### 3. æ•°æ®åº“æ“ä½œ
```javascript
// ä½¿ç”¨ better-sqlite3
const db = require('./config/database');
const stmt = db.prepare('SELECT * FROM users WHERE id = ?');
const user = stmt.get(userId);
```

#### ç¯å¢ƒå˜é‡é…ç½®
```bash
# .env æ–‡ä»¶é…ç½®
NODE_ENV=development
SERVER_PORT=8000
JWT_SECRET=your-jwt-secret-key
ENCRYPTION_KEY=your-encryption-key
SQLITE_PATH=./server/data/easyssh.sqlite
```

### å¸¸ç”¨å¼€å‘å‘½ä»¤

#### å‰ç«¯å‘½ä»¤
```bash
npm run dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run build            # ç”Ÿäº§æ„å»º
npm run build:report     # æ„å»ºåˆ†æ
npm run lint             # ä»£ç æ£€æŸ¥
npm run lint:fix         # è‡ªåŠ¨ä¿®å¤
npm run format           # ä»£ç æ ¼å¼åŒ–
npm run clean            # æ¸…ç†ç¼“å­˜
```

#### åç«¯å‘½ä»¤
```bash
cd server
npm run dev              # å¼€å‘æ¨¡å¼
npm run dev:debug        # è°ƒè¯•æ¨¡å¼
npm run prod             # ç”Ÿäº§æ¨¡å¼
npm run lint             # ä»£ç æ£€æŸ¥
npm run db:backup        # å¤‡ä»½æ•°æ®åº“
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§å¼€å‘é—®é¢˜

#### 1. æ•°æ®åº“ç›¸å…³é—®é¢˜

**SQLiteè¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶æƒé™
ls -la server/data/
chmod 755 server/data/
chmod 644 server/data/easyssh.sqlite

# Dockerç¯å¢ƒæƒé™é—®é¢˜
docker exec -it easyssh ls -la /app/server/data/
docker exec -it easyssh chown -R appuser:appuser /app/server/data/

# æ£€æŸ¥SQLiteé©±åŠ¨
cd server && npm list better-sqlite3
```

**æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥**
```bash
# åˆ é™¤æ•°æ®åº“é‡æ–°åˆå§‹åŒ–
rm server/data/easyssh.sqlite*
cd server && npm run dev
```

#### 4. Dockeréƒ¨ç½²é—®é¢˜

**å®¹å™¨å¯åŠ¨å¤±è´¥**
```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs easyssh

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it easyssh sh

# æ£€æŸ¥å®¹å™¨çŠ¶æ€
docker ps -a
docker inspect easyssh
```

**ç«¯å£è®¿é—®é—®é¢˜**
```bash
# æ£€æŸ¥ç«¯å£æ˜ å°„
docker port easyssh

# æ£€æŸ¥é˜²ç«å¢™
ufw status
iptables -L

# æ£€æŸ¥æœåŠ¡ç›‘å¬
netstat -tulpn | grep 8520
```

### æ€§èƒ½ä¼˜åŒ–

#### å‰ç«¯æ€§èƒ½ä¼˜åŒ–
```bash
# æ„å»ºåˆ†æ
npm run build:report

# åŒ…å¤§å°æ£€æŸ¥
npm run size

# ä¾èµ–åˆ†æ
npm run deps:check
```

#### åç«¯æ€§èƒ½ä¼˜åŒ–
```bash
# ç”Ÿäº§æ¨¡å¼å¯åŠ¨
NODE_ENV=production npm start

# æ•°æ®åº“ä¼˜åŒ–
# SQLiteå·²é…ç½®WALæ¨¡å¼å’Œç¼“å­˜ä¼˜åŒ–

# å†…å­˜ç›‘æ§
node --inspect server/index.js
```

### æ—¥å¿—å’Œç›‘æ§

#### åº”ç”¨æ—¥å¿—
```bash
# å¼€å‘ç¯å¢ƒæ—¥å¿—
npm run dev  # æ§åˆ¶å°è¾“å‡º

# ç”Ÿäº§ç¯å¢ƒæ—¥å¿—
docker logs easyssh -f
tail -f server/logs/app.log
```
#### åˆ‡æ¢æ—¥å¿—çº§åˆ«
```javascript
// è·å–æ—¥å¿—æœåŠ¡å®ä¾‹
const logService = window.services.log;

// æŸ¥çœ‹å½“å‰æ—¥å¿—çº§åˆ«
console.log('å½“å‰æ—¥å¿—çº§åˆ«:', logService.logLevel);

// åŠ¨æ€è®¾ç½®æ—¥å¿—çº§åˆ«
logService.setLogLevel('debug');  // è®¾ç½®ä¸ºè°ƒè¯•çº§åˆ«
logService.setLogLevel('info');   // è®¾ç½®ä¸ºä¿¡æ¯çº§åˆ«
logService.setLogLevel('warn');   // è®¾ç½®ä¸ºè­¦å‘Šçº§åˆ«
logService.setLogLevel('error');  // è®¾ç½®ä¸ºé”™è¯¯çº§åˆ«

// æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çº§åˆ«
console.log('å¯ç”¨æ—¥å¿—çº§åˆ«:', Object.keys(logService.logLevels));
```

#### ç³»ç»Ÿç›‘æ§
```bash
# å®¹å™¨èµ„æºç›‘æ§
docker stats easyssh

# ç³»ç»Ÿèµ„æºç›‘æ§
htop
df -h
```

## ğŸš€ ç”Ÿäº§éƒ¨ç½²æŒ‡å—

### éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

#### ç³»ç»Ÿè¦æ±‚
- [ ] **Docker**: >= 20.10
- [ ] **Docker Compose**: >= 2.0
- [ ] **ç³»ç»Ÿèµ„æº**: æœ€ä½512MB RAMï¼Œ1GBå­˜å‚¨
- [ ] **ç½‘ç»œç«¯å£**: 8520ç«¯å£å¯ç”¨
- [ ] **æ“ä½œç³»ç»Ÿ**: Linux (æ¨èdebian 11+)

#### å®‰å…¨é…ç½®
- [ ] **ç¯å¢ƒå˜é‡**: JWT_SECRETå’ŒENCRYPTION_KEYå·²è®¾ç½®
- [ ] **é˜²ç«å¢™**: å·²é…ç½®é€‚å½“çš„é˜²ç«å¢™è§„åˆ™
- [ ] **SSLè¯ä¹¦**: å·²å‡†å¤‡SSLè¯ä¹¦ï¼ˆå¯é€‰ï¼‰
- [ ] **å¤‡ä»½ç­–ç•¥**: å·²åˆ¶å®šæ•°æ®å¤‡ä»½è®¡åˆ’


####  ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

```bash
# ç”Ÿäº§ç¯å¢ƒæ¨èé…ç½®
docker run -d \
  --name easyssh \
  --restart unless-stopped \
  -p 8520:8520 \
  -e JWT_SECRET="$(openssl rand -base64 32)" \
  -e ENCRYPTION_KEY="$(openssl rand -base64 32)" \
  -v easyssh-data:/app/server/data \
  -v easyssh-logs:/app/server/logs \
  shanheee/easyssh:latest
```
#### ä½¿ç”¨Docker Composeéƒ¨ç½²
```bash
# ä½¿ç”¨Docker Composeå¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

#### ç‰ˆæœ¬å‡çº§
```bash
#!/bin/bash

# EasySSH ä¸€é”®å‡çº§è„šæœ¬ï¼ˆä¿ç•™ç¯å¢ƒå˜é‡ï¼‰
echo "ğŸ”„ å¼€å§‹å‡çº§ EasySSH..."

# æ£€æŸ¥å®¹å™¨æ˜¯å¦å­˜åœ¨
if ! docker ps -a --format "table {{.Names}}" | grep -q "^easyssh$"; then
    echo "âŒ æœªæ‰¾åˆ°åä¸º 'easyssh' çš„å®¹å™¨"
    echo "ğŸ’¡ å¦‚æœæ˜¯é¦–æ¬¡éƒ¨ç½²ï¼Œè¯·ä½¿ç”¨æ ‡å‡†éƒ¨ç½²å‘½ä»¤"
    exit 1
fi

# å‡çº§å‰å…ˆè·å–åŸå®¹å™¨çš„ç¯å¢ƒå˜é‡
echo "ğŸ“‹ è·å–åŸå®¹å™¨ç¯å¢ƒå˜é‡..."
JWT_SECRET=$(docker inspect easyssh --format='{{range .Config.Env}}{{if eq (index (split . "=") 0) "JWT_SECRET"}}{{index (split . "=") 1}}{{end}}{{end}}')
ENCRYPTION_KEY=$(docker inspect easyssh --format='{{range .Config.Env}}{{if eq (index (split . "=") 0) "ENCRYPTION_KEY"}}{{index (split . "=") 1}}{{end}}{{end}}')

# æ£€æŸ¥æ˜¯å¦æˆåŠŸè·å–åˆ°ç¯å¢ƒå˜é‡
if [ -z "$JWT_SECRET" ] || [ -z "$ENCRYPTION_KEY" ]; then
    echo "âš ï¸  è­¦å‘Šï¼šæœªèƒ½è·å–åˆ°å®Œæ•´çš„ç¯å¢ƒå˜é‡"
    echo "ğŸ”‘ JWT_SECRET: ${JWT_SECRET:+å·²è·å–}"
    echo "ğŸ” ENCRYPTION_KEY: ${ENCRYPTION_KEY:+å·²è·å–}"
    echo ""
    echo "â“ æ˜¯å¦ç»§ç»­å‡çº§ï¼Ÿè¿™å¯èƒ½å¯¼è‡´æ•°æ®æ— æ³•è®¿é—®ï¼"
    echo "   è¾“å…¥ 'yes' ç»§ç»­ï¼Œæˆ–æŒ‰ Ctrl+C å–æ¶ˆ"
    read -r confirmation
    if [ "$confirmation" != "yes" ]; then
        echo "âŒ å‡çº§å·²å–æ¶ˆ"
        exit 1
    fi
fi

# åœæ­¢æ—§å®¹å™¨
echo "â¹ï¸  åœæ­¢æ—§å®¹å™¨..."
docker stop easyssh 2>/dev/null || true

# åˆ é™¤æ—§å®¹å™¨ï¼ˆä¿ç•™æ•°æ®å·ï¼‰
echo "ğŸ—‘ï¸  åˆ é™¤æ—§å®¹å™¨..."
docker rm easyssh 2>/dev/null || true

# æ‹‰å–æœ€æ–°é•œåƒ
echo "ğŸ“¥ æ‹‰å–æœ€æ–°é•œåƒ..."
docker pull shanheee/easyssh:latest

# å¯åŠ¨æ–°å®¹å™¨ï¼ˆä½¿ç”¨ä¿ç•™çš„ç¯å¢ƒå˜é‡ï¼‰
echo "ğŸš€ å¯åŠ¨æ–°å®¹å™¨..."
docker run -d \
  --name easyssh \
  --restart unless-stopped \
  -p 8520:8520 \
  -e JWT_SECRET="$JWT_SECRET" \
  -e ENCRYPTION_KEY="$ENCRYPTION_KEY" \
  -v easyssh-data:/app/server/data \
  -v easyssh-logs:/app/server/logs \
  shanheee/easyssh:latest

# ç­‰å¾…æœåŠ¡å¯åŠ¨
echo "â³ ç­‰å¾…æœåŠ¡å¯åŠ¨..."
sleep 10

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
if docker ps | grep -q easyssh; then
    echo "âœ… å‡çº§å®Œæˆï¼"
    echo "ğŸ“‹ æŸ¥çœ‹æ—¥å¿—: docker logs easyssh -f"
else
    echo "âŒ å‡çº§å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ—¥å¿—:"
    docker logs easyssh
fi
```

**âš ï¸ é‡è¦æé†’**ï¼š
- å‡çº§è„šæœ¬ä¼šè‡ªåŠ¨ä¿ç•™åŸå®¹å™¨çš„ `JWT_SECRET` å’Œ `ENCRYPTION_KEY`
- è¿™äº›å¯†é’¥å¯¹äºæ•°æ®å®Œæ•´æ€§è‡³å…³é‡è¦ï¼Œä¸¢å¤±å°†å¯¼è‡´æ— æ³•è®¿é—®å·²ä¿å­˜çš„æ•°æ®
- å¦‚æœæ˜¯é¦–æ¬¡éƒ¨ç½²ï¼Œè¯·ä½¿ç”¨æ ‡å‡†éƒ¨ç½²å‘½ä»¤è€Œéå‡çº§è„šæœ¬


### é«˜çº§éƒ¨ç½²é…ç½®

#### 1. ç¯å¢ƒå˜é‡é…ç½®

```bash
# .env æ–‡ä»¶ç¤ºä¾‹
NODE_ENV=production
SERVER_PORT=8000
JWT_SECRET=your-secure-jwt-secret-32-chars-min
ENCRYPTION_KEY=your-secure-encryption-key-32-chars-min
SERVER_ADDRESS=your-server-ip-or-domain
```

#### 2. åå‘ä»£ç†é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦è‡ªå®šä¹‰åŸŸåæˆ–SSLï¼Œå¯ä»¥åœ¨å‰é¢åŠ ä¸€å±‚Nginxï¼š

```nginx
# /etc/nginx/sites-available/easyssh
server {
    listen 80;
    server_name your-domain.com;

    # é‡å®šå‘åˆ°HTTPSï¼ˆå¯é€‰ï¼‰
    return 301 https://$server_name$request_uri;
}

server {
    listen 443 ssl http2;
    server_name your-domain.com;

    ssl_certificate /path/to/your/cert.pem;
    ssl_certificate_key /path/to/your/key.pem;

    location / {
        proxy_pass http://localhost:8520;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        proxy_read_timeout 86400;
    }
}
```

### è¿ç»´ç®¡ç†

#### æ—¥å¿—ç®¡ç†
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
docker logs easyssh -f

# æŸ¥çœ‹ç‰¹å®šæ—¶é—´æ®µæ—¥å¿—
docker logs easyssh --since="2024-01-01T00:00:00" --until="2024-01-02T00:00:00"

# æ—¥å¿—è½®è½¬ï¼ˆé˜²æ­¢æ—¥å¿—æ–‡ä»¶è¿‡å¤§ï¼‰
docker logs easyssh --tail=1000 > easyssh.log
```
### æ•…éšœæ’é™¤

#### å¸¸è§é—®é¢˜è§£å†³

**1. å®¹å™¨å¯åŠ¨å¤±è´¥**
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
docker logs easyssh

# å¸¸è§åŸå› åŠè§£å†³æ–¹æ¡ˆï¼š
# - ç«¯å£è¢«å ç”¨: lsof -i :8520
# - æƒé™é—®é¢˜: æ£€æŸ¥æ•°æ®ç›®å½•æƒé™
# - å†…å­˜ä¸è¶³: free -h æ£€æŸ¥å¯ç”¨å†…å­˜
```

**2. æ— æ³•è®¿é—®Webç•Œé¢**
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker ps | grep easyssh

# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tulpn | grep 8520

# æ£€æŸ¥é˜²ç«å¢™
ufw status
```

**3. æ•°æ®åº“è¿æ¥é”™è¯¯**
```bash
# æ£€æŸ¥æ•°æ®ç›®å½•æƒé™
docker exec easyssh ls -la /app/server/data/

# é‡æ–°åˆ›å»ºæ•°æ®åº“
docker exec easyssh rm -f /app/server/data/easyssh.sqlite*
docker restart easyssh
```

## ğŸ“š å¼€å‘æœ€ä½³å®è·µ

### ä»£ç è§„èŒƒ

#### å‰ç«¯ä»£ç è§„èŒƒ
```javascript
// 1. ç»„ä»¶å‘½åä½¿ç”¨PascalCase
// âœ… æ­£ç¡®
const UserProfile = defineComponent({...})

// âŒ é”™è¯¯
const userProfile = defineComponent({...})

// 2. ä½¿ç”¨Composition API
// âœ… æ¨è
import { ref, computed, onMounted } from 'vue'

// 3. çŠ¶æ€ç®¡ç†ä½¿ç”¨Pinia
import { useUserStore } from '@/store/user'
```

#### åç«¯ä»£ç è§„èŒƒ
```javascript
// 1. ä½¿ç”¨async/awaitå¤„ç†å¼‚æ­¥
// âœ… æ­£ç¡®
async function getUser(id) {
  try {
    const user = await userService.findById(id)
    return user
  } catch (error) {
    logger.error('è·å–ç”¨æˆ·å¤±è´¥:', error)
    throw error
  }
}

// 2. ç»Ÿä¸€é”™è¯¯å¤„ç†
const handleError = (error, res) => {
  logger.error(error)
  res.status(500).json({ error: error.message })
}
```

### å®‰å…¨æœ€ä½³å®è·µ

#### 1. ç¯å¢ƒå˜é‡ç®¡ç†
```bash
# ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹çš„å¯†é’¥
JWT_SECRET=your-secure-jwt-secret-32-chars-min
ENCRYPTION_KEY=your-secure-encryption-key-32-chars-min

# ä½¿ç”¨å¼ºå¯†ç ç”Ÿæˆå™¨
openssl rand -base64 32
```

### æ€§èƒ½ä¼˜åŒ–

#### å‰ç«¯æ€§èƒ½ä¼˜åŒ–
```bash
# 1. æ„å»ºåˆ†æ
npm run build:report

# 2. åŒ…å¤§å°æ£€æŸ¥
npm run size

# 3. ä»£ç åˆ†å‰²
# è·¯ç”±çº§åˆ«çš„ä»£ç åˆ†å‰²å·²é…ç½®

# 4. é™æ€èµ„æºä¼˜åŒ–
# Viteè‡ªåŠ¨å¤„ç†èµ„æºå‹ç¼©å’Œç¼“å­˜
```

#### åç«¯æ€§èƒ½ä¼˜åŒ–
```javascript
// 1. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
const stmt = db.prepare('SELECT * FROM users WHERE id = ?')
const user = stmt.get(userId) // é¢„ç¼–è¯‘è¯­å¥

// 2. ç¼“å­˜ç­–ç•¥
const cache = require('node-cache')
const userCache = new NodeCache({ stdTTL: 600 })

// 3. è¿æ¥æ± ç®¡ç†
// SQLiteè¿æ¥å·²ä¼˜åŒ–ä¸ºWALæ¨¡å¼
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹
1. **Forké¡¹ç›®** - ä»ä¸»ä»“åº“Forkåˆ°ä¸ªäººä»“åº“
2. **åˆ›å»ºåˆ†æ”¯** - `git checkout -b feature/new-feature`
3. **å¼€å‘åŠŸèƒ½** - éµå¾ªä»£ç è§„èŒƒè¿›è¡Œå¼€å‘
4. **æµ‹è¯•éªŒè¯** - ç¡®ä¿åŠŸèƒ½æ­£å¸¸ä¸”æ— ç ´åæ€§å˜æ›´
5. **æäº¤ä»£ç ** - `git commit -m "feat: add new feature"`
6. **æ¨é€åˆ†æ”¯** - `git push origin feature/new-feature`
7. **åˆ›å»ºPR** - æäº¤Pull Requeståˆ°ä¸»ä»“åº“

### æäº¤è§„èŒƒ
```bash
# æäº¤æ¶ˆæ¯æ ¼å¼
<type>(<scope>): <description>

# ç±»å‹è¯´æ˜
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºå·¥å…·æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

# ç¤ºä¾‹
feat(auth): add multi-factor authentication
fix(ssh): resolve connection timeout issue
docs(readme): update installation guide
```

### ä»£ç å®¡æŸ¥
- ç¡®ä¿ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
- æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
- éªŒè¯åŠŸèƒ½çš„å®Œæ•´æ€§å’Œç¨³å®šæ€§
- æ£€æŸ¥æ˜¯å¦æœ‰å®‰å…¨éšæ‚£

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäº **Apache License 2.0** è®¸å¯è¯å¼€æºã€‚

è¯¦æƒ…è¯·å‚é˜… [LICENSE](../LICENSE) æ–‡ä»¶ã€‚
